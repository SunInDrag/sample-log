document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("pre code").forEach(e=>{const n=e.parentElement,t=document.createElement("button");t.className="copy-button",t.innerHTML='<i class="fas fa-copy"></i>',t.addEventListener("click",async n=>{n.preventDefault(),n.stopPropagation();try{const n=e.innerText.replace(/\u00A0/g," ").replace(/\t/g,"    ").replace(/\n$/,"");await navigator.clipboard.writeText(n),t.innerHTML='<i class="fas fa-check"></i>',t.classList.add("copied"),setTimeout(()=>{t.innerHTML='<i class="fas fa-copy"></i>',t.classList.remove("copied")},2e3)}catch(e){console.error("复制失败:",e),t.innerHTML='<i class="fas fa-times"></i>',setTimeout(()=>{t.innerHTML='<i class="fas fa-copy"></i>'},2e3)}}),n.querySelector(".copy-button")||n.appendChild(t);let s=0,o=0;n.addEventListener("touchstart",e=>{s=e.touches[0].clientX,o=e.touches[0].clientY}),n.addEventListener("touchmove",e=>{const t=e.touches[0].clientX,n=e.touches[0].clientY;Math.abs(t-s)>Math.abs(n-o)&&e.preventDefault()},{passive:!1})})})